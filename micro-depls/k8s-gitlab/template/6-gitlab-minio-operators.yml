- type: replace
  path: /instance_groups/name=k8s-helm-addons/jobs/name=action/properties/actions/-
  value:
    type: helm_chart
    name: gitlab-minio
    chart: stable/minio
    namespace: gitlab
    version: ((minio-version))
    properties:
    - name: mode
      value: "distributed"
    - name: existingSecret
      value: s3access
    - name: persistence.storageClass
      value: "longhorn"
    - name: persistence.enabled
      value: 'true'


    values_file_content:
      service:
        annotations:
          prometheus.io/scrape: 'true'
          prometheus.io/path: '/minio/prometheus/metrics'
          prometheus.io/port: '9000'

      buckets:
      - name: registry
        policy: none
        purge: false

      - name: git-lfs
        policy: none
        purge: false

      - name: runner-cache
        policy: none
        purge: false

      - name: gitlab-uploads
        policy: none
        purge: false

      - name: gitlab-artifacts
        policy: none
        purge: false

      - name: gitlab-backups
        policy: none
        purge: false

      - name: gitlab-packages
        policy: none
        purge: false

      - name: tmp
        policy: none
        purge: false

      - name: gitlab-pseudo
        policy: none
        purge: false

      - name: gitlab-mr-diffs
        policy: none
        purge: false

      - name: gitlab-terraform-state
        policy: none
        purge: false

      - name: gitlab-dependency-proxy
        policy: none
        purge: false
