
## https://docs.gitlab.com/charts/installation/secrets.html#manual-secret-creation-optional
##  https://docs.gitlab.com/charts/installation/secrets.html#gitlab-shell-secret


- type: replace
  path: /variables?/-
  value:
    name: gitlab-rails-secret_key_base
    type: password


- type: replace
  path: /variables?/-
  value:
    name: gitlab-rails-otp_key_base
    type: password

- type: replace
  path: /variables?/-
  value:
    name: gitlab-rails-db_key_base
    type: password

- type: replace
  path: /variables?/-
  value:
    name: gitlab-openid_connect_signing_key
    type: rsa




- type: replace
  path: /instance_groups/name=k8s-helm-addons/jobs/name=action/properties/actions/-
  value:
    type: secret
    name: gitlab-rails-secret
    namespace: gitlab
    data:
    - name: secrets.yml
      value: |
        production:
          secret_key_base: ((gitlab-rails-secret_key_base))
          otp_key_base: ((gitlab-rails-otp_key_base))
          db_key_base: ((gitlab-rails-db_key_base))
          openid_connect_signing_key: |
           ((gitlab-openid_connect_signing_key.private_key))