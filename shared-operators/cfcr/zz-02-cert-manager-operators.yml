- type: replace
  path: /instance_groups/name=cfcr-helm-addons/jobs/name=kubectl/properties/secrets/-
  value:
    name: ca-key-cert-secret
    namespace: cert-manager
    data:
    - name: tls.crt
      value: ((tls-kubernetes.ca))
    - name: tls.key
      value: ((tls-kubernetes.private_key))

- type: replace
  path: /instance_groups/name=cfcr-helm-addons/jobs/name=kubectl/properties/commands/-
  value:
    name: "crd-for-cert-manager"
    cmd: "apply"
    options: "-f https://github.com/jetstack/cert-manager/releases/download/v((cert-manager-version))/cert-manager.yaml
"
- type: replace
  path: /instance_groups/name=cfcr-helm-addons/jobs/name=kubectl/properties/commands/-
  value:
    name: "clusterissuer"
    cmd: "apply"
    options: ""
    apply:
      apiVersion: cert-manager.io/v1alpha2
      kind: ClusterIssuer
      metadata:
        name: issuer
      spec:
        ca:
          secretName: ca-key-cert-secret