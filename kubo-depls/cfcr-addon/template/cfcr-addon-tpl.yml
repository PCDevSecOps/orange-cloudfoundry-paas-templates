---
#Deployment Identification
name: cfcr-addon

#Features Block

#Releases Block
releases:
- name: helm-kubectl
  version: latest

- name: shell
  version: latest

#Stemcells Block
stemcells:
- alias: default
  os: ubuntu-xenial
  version: latest

#Update Block
update:
  canaries: 1
  max_in_flight: 2
  canary_watch_time: 15000-30000
  update_watch_time: 15000-300000

#Instance Groups Block
instance_groups:
- name: cfcr-helm-addons
  vm_type: small
  stemcell: default
  networks:
  - name: tf-net-kubo
  azs: [z1,z2,z3]
  instances: 1
  jobs:
  - name: shell
    release: shell
  - name: kubectl
    release: helm-kubectl
    properties:
      kubernetes: &kubernetes
        host: ((kubernetes.host))
        port: ((kubernetes.port))
        cluster_ca_certificate: ((kubernetes.cluster_ca_certificate))
        password: ((kubernetes-password))
      commands: []
  - name: helm
    release: helm-kubectl
    properties:
      kubernetes:
        host: ((kubernetes.host))
        port: ((kubernetes.port))
        cluster_ca_certificate: ((kubernetes.cluster_ca_certificate))
        password: ((kubernetes-password))
        default_storageclass: tf-cinder-storage-class

      repositories:
      - name: stable
        url: https://kubernetes-charts.storage.googleapis.com/
      - name: incubator
        url : https://kubernetes-charts-incubator.storage.googleapis.com/
      charts:
      - name: nginx-ingress
        chart: stable/nginx-ingress
        version: ((nginx-ingress-version))
        properties:
        - name: rbac.create
          value: true
        - name: controller.service.type
          value: NodePort
        - name: controller.service.nodePorts.https
          value: 30725
        - name: controller.service.nodePorts.http
          value: 30726
        - name: revisionHistoryLimit
          value: 5
        - name: controller.extraArgs.enable-ssl-passthrough
          value: ""
        - name: controller.replicaCount
          value: 2
        - name: controller.minAvailable
          value: 1
        - name: podSecurityPolicy.enabled
          value: true

      ingress: []



#variables:

#Addons Block

#Properties Block
#should not be used anymore

#variables:

#Addons Block

#Properties Block
#should not be used anymore
